/*!
 * jtools v0.0.1
 * jlb web team
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("regenerator-runtime")):"function"==typeof define&&define.amd?define(["regenerator-runtime"],t):e.jtools=t(e.regeneratorRuntime)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t,t={device:{trident:-1<(t=navigator.userAgent).indexOf("Trident"),presto:-1<t.indexOf("Presto"),webKit:-1<t.indexOf("AppleWebKit"),gecko:-1<t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<t.indexOf("Android")||-1<t.indexOf("Adr"),iPhone:-1<t.indexOf("iPhone"),iPad:-1<t.indexOf("iPad")||-1<t.indexOf("Macintosh"),webApp:-1===t.indexOf("Safari"),weixin:-1<t.indexOf("MicroMessenger"),qq:-1<t.indexOf(" QQ")},language:(navigator.browserLanguage||navigator.language).toLowerCase()};function c(e,t){var n=new Blob([e],{type:"application/vnd.ms-excel,charset=UTF-8"});window.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(n,t+".xlsx"):((e=document.createElement("a")).href=window.URL.createObjectURL(n),e.download=t+".xlsx",e.click(),window.URL.revokeObjectURL(e.href))}function s(e){if(!e)return"";if("string"!=typeof e)return console.error("需要编译的数据类型需要是字符串类型"),e;return e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return 2===e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+65536+e.charCodeAt(1)-56320)+";":e})}function r(e){if(!e)return"";if("string"!=typeof e)return console.error("需要解析的数据类型需要是字符串类型"),e;for(var t=(a=s(e)).match(/&#\d+;/g)||[],n=0;n<t.length;n++){i=(i=t[n]).replace("&#","").replace(";","");var r=Math.floor((i-65536)/1024)+55296,o=(i-65536)%1024+56320,i="&#"+i+";",o=String.fromCharCode(r,o),a=a.replace(i,o)}return a}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t){return e(t={exports:{}},t.exports),t.exports}var u=n(o(function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0}));var i=n(o(function(e){function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0})),a=e;function f(){return new Promise(function(t){if(window.WebViewJavascriptBridge)return t(window.WebViewJavascriptBridge);!function(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);document.addEventListener("WebViewJavascriptBridgeReady",function(){return e(window.WebViewJavascriptBridge)},!1),window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}(function(e){e.init(function(e,t){t({"Javascript Responds":"Wee!"})}),t(e)})})}var d=Object.prototype.hasOwnProperty;return{isColor:function(e){return/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(e)},getParam:function(e,t){var n=location.search||"",r={};if(-1!=(n=e&&"hash"===e?location.hash||"":n).indexOf("?")){var o=(n.substr(1)||"").split("&");if(o&&o.length)for(var i=0;i<o.length;i++){var a=o[i].split("=");2==a.length&&(r[a[0]]=decodeURIComponent(a[1]))}}return t&&Object.keys(r).length?r[t]||"":r},setParam:function(e,t){if("object"!==u(t))return e;for(var n in t)if(r=!1===(r=t[n])?String(r):r){e=e.replace(new RegExp("(^|\\?|&)"+n+"=[^&]*(?=&|$|#)","g"),"");for(var r,o=(r=r.splice?r:[r]).length-1;0<=o;o--)r[o]=encodeURIComponent(r[o]);n=n+"="+r.join("&"+n+"=");e=e+(/\?/.test(e)?"&":"?")+n}return e},getImgBase64:function(e){var i,a=new Image;return a.setAttribute("crossOrigin","anonymous"),a.src=e,new Promise(function(o,e){a.onload=function(){var e=document.createElement("canvas"),t=a.width,n=a.height,r=e.getContext("2d");r.scale(5,5),e.width=5*t,e.height=5*n,r.drawImage(a,0,0,5*t,5*n),i=e.toDataURL("image/png"),o(i)}})},dateFormat1:function(e){if(!e)return"";var t=1e3*e,n=(new Date).getTime(),r=new Date(t).getFullYear(),o=new Date(t).getMonth()+1,i=new Date(t).getDate(),a=new Date(t).getHours(),s=new Date(t).getMinutes(),e="星期"+["日","一","二","三","四","五","六"][new Date(t).getDay()];return s<10&&(s="0"+s),a<10&&(a="0"+a),(new Date).getDate()-new Date(t).getDate()==0?a+":"+s:(new Date).getDate()-new Date(t).getDate()==1?"昨天 "+a+":"+s:(new Date).getTime()<new Date(t).getTime()&&(new Date).getDate()-new Date(t).getDate()<7&&0<(new Date).getDay()-new Date(t).getDay()?e+a+":"+s:r<new Date(n).getFullYear()?r+"年"+o+"月"+i+"日   "+a+":"+s:o+"月"+i+"日   "+a+":"+s},dateFormat2:function(e){if(!e)return"";e*=1e3;var t=(new Date).getTime()-e;if(!(t<0)){var n=t/6e4,r=t/36e5,o=new Date;o.setTime(e);var i=o.getFullYear(),a=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,s=o.getDate()<10?"0"+o.getDate():o.getDate(),e=o.getHours()<10?"0"+o.getHours():o.getHours(),o=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes();return 1<=r&&r<24?" "+parseInt(r)+"小时前":24<=r&&r<48&&(new Date).getDate()-s==1?"昨天 "+e+":"+o:1<=n&&n<60?" "+parseInt(n)+"分钟前":0<=t&&t<=6e4?"刚刚":i+"-"+a+"-"+s+" "+e+":"+o}},elDateFormat:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!e)return null;var n=null;if(Array.isArray(e)&&0<e.length)n=1==t?Math.floor(new Date(new Date(e[t]).setHours(23,59,59,0))/1e3):Math.floor(new Date(new Date(e[t]).setHours(0,0,0,0))/1e3);else{if(Array.isArray(e)&&0==e.length)return null;if(Array.isArray(e))return null;n=Math.floor(new Date(e).getTime()/1e3)}return n},getBrowserModel:function(){var e={},t=navigator.userAgent.toLowerCase(),n=null;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))?e.safari=n[1]:(n=t.match(/micromessenger\/([\d\.]+)/))?e.micromessenger=n[1]:(n=t.match(/QQ\/([\d\.]+)/gi))&&(e.qq=n[1]),e.ie?"IE:"+e.ie:e.edge?"Edge:"+e.edge:e.firefox?"Firefox:"+e.firefox:e.chrome?"Chrome:"+e.chrome:e.opera?"Opera:"+e.opera:e.safari?"Safari:"+e.safari:e.micromessenger?"Micromessenger:"+e.micromessenger:e.qq?"QQ:"+e.qq:"Unknown"},getDeviceModel:t,exportXls:function(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"jtools",a=2<arguments.length?arguments[2]:void 0;if(!o||0==o.size)return a&&a({type:"fail",msg:"数据为空"}),!1;var s=new FileReader;s.readAsText(o,"utf-8"),s.onload=function(e){try{var t=JSON.parse(s.result),n=t.code,r=t.msg;if(n&&200!=n)return a&&a({type:"fail",code:n,msg:r}),!1;c(o,i),a&&a({type:"success"})}catch(e){c(o,i),a&&a({type:"success"})}}},getThumbnails:function(){var t=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{src:"",type:"",payload:{width:750},ifSelf:!0,ossdomain:"https://images2.bestjlb.com/"}).src,n=e.type,r=e.payload,o=e.ifSelf,e=e.ossdomain;return t?-1<t.indexOf("?")?t:-1<t.indexOf(e)?-1<t.indexOf("v2jlboss")?i(!0):i():-1<t.indexOf("jlboss")?e+i():-1<t.indexOf("v2jlboss")?e+i(!0):t:"";function i(e){return 2!==n||o?4!==n||o?t:e?"".concat(t,".jpeg?x-oss-process=image/format,jpg/resize,w_").concat(r.width,"/auto-orient,1"):"".concat(t,"?x-oss-process=video/snapshot,t_1000,w_").concat(r.width):"".concat(t,"?x-oss-process=image/resize,w_").concat(r.width,"/auto-orient,1")}},getDefaultAvatar:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{userId:0,imageDomain:""},t=e.userId;return(e=e.imageDomain)?e+"/photo/user_header"+(t||0)%10+".png":""},isEmoji:function(e){return new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g").test(e)},isIDCard:function(e){return/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e)},isSpecialChar:function(e){return/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]\s]/im.test(e)||/[·！#￥（——）：；“”‘、，|《。》？、【】[\]\s]/im.test(e)},isMobile:function(e){return/^[1][0-9]{10}$/.test(e)},handleEmoji:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"encode";return e?"string"!=typeof e?(console.error("handleEmoji数据类型需要是字符串类型"),e):"encode"===t?s(e):"decode"===t?r(e):e:""},handleText:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"encode";if(!e)return"";if("string"!=typeof e)return console.error("handleText数据类型需要是字符串类型"),e;var n=null;if("encode"===t)n=r(e).replace(/<br>/gi,"\n").replace(/&nbsp;/g," ").replace("&lt;","<").replace("&gt;",">");else{if("decode"!==t)return e;n=s(e).replace("<","&lt;").replace(">","&gt;").replace(/\n|\r\n/g,"<br>").replace(/[ ]/g,"&nbsp;")}return n},handleParam:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("{}"===JSON.stringify(t))return{};var n={};return Object.keys(t).forEach(function(e){null!==t[e]&&(n[e]=t[e])}),n},jsBridge:{ctx:null,callHandler:function(){var n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:"",data:{}};return new Promise(function(){var t=i(a.mark(function e(t){return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ctx){e.next=4;break}return e.next=3,f();case 3:n.ctx=e.sent;case 4:n.ctx.callHandler(r.name,r.data,function(e){return t(e)});case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())},registerHandler:function(e){this.ctx.registerHandler(e,function(e,t){t&&t("返回一个字符串，告诉ObjC：我已收到数据".concat(JSON.stringify(e)))})}},debounce:function(r,o,i){var a;return function(){var e,t=this,n=arguments;a&&clearTimeout(a),i?(e=!a,a=setTimeout(function(){a=null},o),e&&r.apply(t,n)):a=setTimeout(function(){r.apply(t,n)},o)}},throttle:function(r,o,i){return function(){var e,t=this,n=arguments;1===i?(e=Date.now())-previous>o&&(r.apply(t,n),previous=e):2===i&&(timeout=timeout||setTimeout(function(){timeout=null,r.apply(t,n)},o))}},deepCopy:function e(t){if(!t)return t;switch(u(t)){case"string":case"number":case"boolean":return t}var n;if("[object Array]"===toString.call(t))for(var r=[],o=0,i=t.length;o<i;o++)r[o]=e(t[o]);else if((n=t)&&"[object Object]"===toString.call(n))for(var a in r={},t)d.call(t,a)&&(r[a]=e(t[a]));return r}}});